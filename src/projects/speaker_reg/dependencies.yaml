# 依赖配置文件
# 支持从不同索引源安装不同的依赖包

# 依赖组（按安装源分组）
groups:
  # PyTorch 相关包（需要从 PyTorch 官方索引安装）
  pytorch:
    index_url: "https://download.pytorch.org/whl/cu121"
    packages:
      - torch==2.4.1
      - torchaudio==2.4.1
    description: "PyTorch with CUDA 12.1 support"

  # 标准 PyPI 包（从默认源安装）
  standard:
    index_url: null # null 表示使用默认 PyPI 源
    packages:
      - tqdm
      - scipy
      - numpy
      - scikit-learn
      - kaldiio
      - pyyaml
      - matplotlib
      - pandas
      - openpyxl
      - transformers==4.46.3
      - huggingface-hub>=0.23.2,<1.0
      - sentencepiece
      - hdbscan
      - umap-learn
      - soundfile
      - librosa
      - onnxruntime
      - modelscope
      - fastapi
      - uvicorn
      - python-multipart
      - addict
      - datasets
      - pyarrow
      - fastcluster
      - funasr
      - runpod
    description: "Standard packages from PyPI"

  # # funasr 使用 --no-deps 安装（安全的解决方案）
  # funasr:
  #   index_url: null
  #   no_deps: true
  #   packages:
  #     - funasr==1.2.7
  #   description: "FunASR installed with --no-deps"

# 安装顺序（某些包需要先安装）
install_order:
  - pytorch # 先安装 PyTorch
  - standard # 再安装其他包（包括 umap-learn）
#  - funasr # 最后安装 funasr

# 元数据
metadata:
  project: speaker-reg
  python_version: "3.10"
  created: "2024-11-23"
  updated: "2025-12-26"
  description: "Speaker diarization project dependencies"
